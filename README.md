# Jack Decompiler

An experimental decompiler for the standard Jack Compiler as presented in the [From Nand to Tetris](https://www.nand2tetris.org/) course.

## Requirements

* Node.js
* JackCompiler (for testing)

## Usage

Single file:
```
node decomp path\to\File.vm
```

Directory:
```
node decomp path\to\Directory
```

## Features (and bugs!)

* All test examples from the course (including the complete OS code) can be decompiled and compiled back (with some minor warnings) to the exact same VM code.
* Produces properly indented Jack code.
* Variable names can't be determined, so standard names are given. (Examples: `static0`, `field1`, `v2`, `a3`)
* The decompiler tries to guess the type for variables and return types, but some minor incorrect types may occur. This is usually not a problem in Jack due to weak typing system.
* In some places its hard to guess a variable type, specially in method calls and a method call (`obj.method(arg)`) is translated as a function call (`Class.method(obj, arg)`) and that can give a warning when compiling back to VM.
* Present decompiler can only handle VM code generated by reference Jack Compiler (or a compiler that follows the same conventions).

## Testing

On Windows:

```
.\TestAll.bat
```

> Edit `TestDecomp.bat` to point to `JackCompiler.bat` location.

Other OS: 

*to be done...*
